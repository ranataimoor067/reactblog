import{G as D,b as G,c as _,r,j as e,e as H,m as p,A as R,d as T,M as V,a as b,l as y}from"./index-BrEYpHH-.js";import{F as q,a as J}from"./index-z-B9LFWW.js";function K(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22c5.421 0 10-4.579 10-10h-2c0 4.337-3.663 8-8 8s-8-3.663-8-8c0-4.336 3.663-8 8-8V2C6.579 2 2 6.58 2 12c0 5.421 4.579 10 10 10z"},child:[]}]})(n)}const X=()=>{var A,U,C;const{userId:n}=G(),{user:x}=_(t=>t.auth),[s,j]=r.useState(null),[E,L]=r.useState(!0),[v,w]=r.useState(null),[o,N]=r.useState(!1),[m,k]=r.useState(!1),[S,h]=r.useState(null),[c,I]=r.useState([]),[d,f]=r.useState(1),[g,O]=r.useState(1),[M,$]=r.useState(!0),[F,P]=r.useState(null);r.useEffect(()=>{(async()=>{var a,l;try{w(null);const i=await b.get(`${y}/api/auth/user/${n}`);j(i.data);const u=localStorage.getItem("userId");u&&i.data.followers&&N(i.data.followers.includes(u))}catch(i){w(((l=(a=i.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to fetch user profile")}finally{L(!1)}})()},[n,x]),r.useEffect(()=>{n&&(async()=>{var a,l;try{$(!0),P(null);const i=await b.post(`${y}/api/article/getarticlesbyuser`,{uid:n});i.data.success&&I(i.data.articleDetails)}catch(i){P(((l=(a=i.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to fetch articles")}finally{$(!1)}})()},[n,d]);const B=async()=>{var t,a;if(!x){h("Please login to follow users");return}k(!0),h(null);try{const l={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},i=o?"unfollow":"follow",u=await b.post(`${y}/api/auth/${i}/${n}`,{},l);N(!o),j(z=>({...z,followers:u.data.followers})),h(null)}catch(l){console.error(`Error ${o?"unfollowing":"following"} user:`,l),h(((a=(t=l.response)==null?void 0:t.data)==null?void 0:a.error)||`Failed to ${o?"unfollow":"follow"} user`)}finally{k(!1)}};return E?e.jsx(H,{}):v?e.jsx("div",{className:"text-red-500 text-center mt-4",children:v}):s?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 pt-16 pb-12",children:[e.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[S&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:S}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 dark:from-yellow-400 dark:to-orange-500 p-1",children:e.jsx("div",{className:"w-full h-full rounded-full bg-white dark:bg-gray-900 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-yellow-400 dark:to-orange-500 text-transparent bg-clip-text",children:(A=s.username)==null?void 0:A.charAt(0).toUpperCase()})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-yellow-400 dark:to-orange-500 text-transparent bg-clip-text",children:s.username}),s.name&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:s.name})]})]}),x&&x.userId!==n&&e.jsx("button",{onClick:B,disabled:m,className:`
                                    flex items-center justify-center gap-2
                                    px-4 sm:px-6 py-2 
                                    rounded-full font-semibold
                                    transition-all duration-300 ease-in-out
                                    transform hover:scale-105
                                    text-sm sm:text-base
                                    min-w-[120px] sm:min-w-[140px]
                                    ${m?"bg-gray-300 cursor-not-allowed":o?"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-200 hover:bg-red-500 hover:text-white dark:hover:bg-red-600":"bg-blue-600 text-white hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600"}
                                    focus:outline-none focus:ring-2 
                                    ${o?"focus:ring-red-500":"focus:ring-blue-500"}
                                    focus:ring-offset-2 dark:focus:ring-offset-gray-800
                                    shadow-md hover:shadow-lg
                                `,children:m?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(K,{className:"animate-spin h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Processing..."})]}):e.jsx("span",{className:"flex items-center justify-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:`h-4 w-4 transition-colors duration-300 
                                                    ${m?"text-gray-400":"group-hover:text-white"}`}),e.jsx("span",{children:"Unfollow"})]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{children:"Follow"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s.location||"Not specified"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Member Since"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:new Date(s.accountCreated).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Articles Published"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s.articlesPublished})]}),s.age&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Age"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s.age," years"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Followers"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:((U=s.followers)==null?void 0:U.length)||0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Following"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:((C=s.following)==null?void 0:C.length)||0})]})]})]})]})]}),e.jsxs("div",{className:"container mx-auto px-4 max-w-7xl mt-8",children:[e.jsx("h2",{className:"text-5xl font-extrabold text-center bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-transparent bg-clip-text mb-12",children:"Published Articles"}),M?e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"})}):F?e.jsx("div",{className:"text-red-500 text-center",children:F}):(c==null?void 0:c.length)>0?e.jsxs(e.Fragment,{children:[e.jsx(p.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(R,{children:c.map(t=>e.jsxs(p.div,{variants:{hidden:{opacity:0,scale:.9,y:20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:200,damping:10}},hover:{scale:1.03,boxShadow:"0 15px 30px rgba(0,0,0,0.1), 0 10px 20px rgba(0,0,0,0.08)",transition:{duration:.3}}},initial:"hidden",animate:"visible",whileHover:"hover",className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-lg overflow-hidden",children:[t.thumbnail&&e.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-48 object-cover transition-transform duration-300 hover:scale-105"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300 rounded-full text-xs",children:t.tag||"Uncategorized"}),e.jsx(T,{articleId:t._id,initialLikes:t.likes||0})]}),e.jsx("h3",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:t.title}),e.jsx(V,{className:"text-gray-600 dark:text-gray-300 h-20 mb-8 line-clamp-3",children:t.content?`${t.content.substring(0,300)}${t.content.length>300?"...":""}`:"No description available."}),e.jsx(p.button,{variants:{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:300,damping:10,duration:.4}},hover:{scale:1.05,rotate:[0,-5,5,0],transition:{type:"spring",stiffness:300,duration:.2}},tap:{scale:.95,transition:{duration:.1}}},initial:"initial",animate:"animate",whileHover:"hover",whileTap:"tap",onClick:()=>window.location.href=`/article/${t.name}`,className:"relative w-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white py-3 rounded-xl hover:from-indigo-600 hover:to-purple-700 transition duration-300 bottom-4",children:"Read More"})]})]},t._id))})}),g>1&&e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-center items-center gap-2 mt-8 mb-4 text-sm",children:[e.jsx("button",{onClick:()=>f(t=>Math.max(t-1,1)),disabled:d===1,className:`px-2 py-1 ${d===1?"text-gray-400 cursor-not-allowed dark:text-gray-600":"text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400"} transition-colors duration-200`,children:"← Prev"}),e.jsx("div",{className:"flex gap-1",children:[...Array(g)].map((t,a)=>e.jsx("button",{onClick:()=>f(a+1),className:`w-8 h-8 rounded-full transition-colors duration-200 ${d===a+1?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/50 dark:text-indigo-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800/50"}`,children:a+1},a+1))}),e.jsx("button",{onClick:()=>f(t=>Math.min(t+1,g)),disabled:d===g,className:`px-2 py-1 ${d===g?"text-gray-400 cursor-not-allowed dark:text-gray-600":"text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400"} transition-colors duration-200`,children:"Next →"})]}),e.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-4",children:["Showing ",c.length," articles"]})]}):e.jsx("div",{className:"text-center text-gray-600 dark:text-gray-400 mt-4",children:"No articles published yet by this user"})]})]}):e.jsx("div",{className:"text-center mt-4",children:"User not found"})};export{X as default};
