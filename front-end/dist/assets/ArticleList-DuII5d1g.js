import{r as i,c as U,j as e,m as o,A as V,d as _,M as G,a as w,l as Q}from"./index-BrEYpHH-.js";const R="/assets/noarticle-BJxS4Uoj.png",K=()=>{const[x,u]=i.useState([]),[g,p]=i.useState([]),[j,f]=i.useState(""),[c,k]=i.useState("newest"),[N,W]=i.useState(null),[b,A]=i.useState(!0),[q,S]=i.useState(null),[C,T]=i.useState(!1),m=`${Q}`,[l,y]=i.useState(1),[h,L]=i.useState(1),[F,M]=i.useState(0),P=9,$=U(t=>t.auth.theme),E={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},B={initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:300,damping:10,duration:.4}},hover:{scale:1.05,rotate:[0,-5,5,0],transition:{type:"spring",stiffness:300,duration:.2}},tap:{scale:.95,transition:{duration:.1}}},D={hidden:{opacity:0,scale:.9,y:20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:200,damping:10}},hover:{scale:1.03,boxShadow:"0 15px 30px rgba(0,0,0,0.1), 0 10px 20px rgba(0,0,0,0.08)",transition:{duration:.3}}};i.useEffect(()=>{const t=async()=>{try{const a=await w.get(`${m}/api/article/getallarticle`,{params:{page:l,limit:P}});if(a.status===200){const{articles:r,totalPages:d,totalArticles:O}=a.data;u(r),p(v(r,c)),L(d),M(O)}}catch{S("Error fetching articles")}finally{A(!1)}};(()=>{const a=localStorage.getItem("token");T(!!a)})(),t()},[l]),i.useEffect(()=>{p(v(x,c))},[x,c]);const v=(t,s)=>[...t].sort((a,r)=>{switch(s){case"most-liked":return(r.likes||0)-(a.likes||0);case"newest":return new Date(r.createdAt).getTime()-new Date(a.createdAt).getTime();case"oldest":return new Date(a.createdAt).getTime()-new Date(r.createdAt).getTime();case"more than 500 words":return n(r.content)-n(a.content);case"less than 500 words":return n(a.content)-n(r.content);case"more than 1000 words":return n(r.content)-n(a.content);case"less than 1000 words":return n(a.content)-n(r.content);default:return new Date(r.createdAt).getTime()-new Date(a.createdAt).getTime()}}).filter(a=>{switch(s){case"more than 500 words":return n(a.content)>500;case"less than 500 words":return n(a.content)<=500;case"more than 1000 words":return n(a.content)>1e3;case"less than 1000 words":return n(a.content)<=1e3;default:return!0}}),n=t=>t?t.trim().split(/\s+/).length:0,I=t=>{const s=t.target.value.toLowerCase();f(s),p(v(x.filter(a=>{var r;return a.title.toLowerCase().includes(s)||((r=a.content)==null?void 0:r.toLowerCase().includes(s))}),c))},H=async t=>{try{if(t==="Others"){const r=(await w.get(`${m}/api/article/getallarticle`)).data.articles.filter(d=>!d.tag||d.tag===""||d.tag==="Uncategorized");u(r)}else{const s=await w.post(`${m}/api/article/getarticlebytag`,{tag:t});u(s.data.articles||[])}}catch(s){console.error("Error fetching articles by tag",s)}},z=()=>e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-center items-center gap-2 mt-8 mb-4 text-sm",children:[e.jsx("button",{onClick:()=>y(t=>Math.max(t-1,1)),disabled:l===1,className:`px-2 py-1 ${l===1?"text-gray-400 cursor-not-allowed dark:text-gray-600":"text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400"} transition-colors duration-200`,children:"← Prev"}),e.jsx("div",{className:"flex gap-1",children:[...Array(h)].map((t,s)=>e.jsx("button",{onClick:()=>y(s+1),className:`w-8 h-8 rounded-full transition-colors duration-200 ${l===s+1?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/50 dark:text-indigo-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800/50"}`,children:s+1},s+1))}),e.jsx("button",{onClick:()=>y(t=>Math.min(t+1,h)),disabled:l===h,className:`px-2 py-1 ${l===h?"text-gray-400 cursor-not-allowed dark:text-gray-600":"text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400"} transition-colors duration-200`,children:"Next →"})]});return e.jsx(o.div,{initial:"initial",animate:"in",exit:"out",variants:E,className:"bg-gradient-to-br from-indigo-50 via-purple-100 to-pink-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 min-h-screen py-10 pt-24",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx(o.h1,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-5xl font-extrabold text-center bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-transparent bg-clip-text mb-12",children:"Explore Articles"}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row justify-between items-center mb-8 space-y-4 md:space-y-0",children:[e.jsx("input",{type:"text",placeholder:"Search articles...",value:j,onChange:I,className:"w-full md:w-1/2 px-4 py-3 rounded-xl bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-200 dark:border-gray-700 focus:ring-2 focus:ring-indigo-400 transition duration-300"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("select",{value:N,onChange:t=>H(t.target.value),className:"px-4 py-3 rounded-xl bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("option",{value:"Tech",children:"Technology"}),e.jsx("option",{value:"Music",children:"Music"}),e.jsx("option",{value:"Game",children:"Gaming"}),e.jsx("option",{value:"Movies",children:"Movies"}),e.jsx("option",{value:"Books",children:"Books"}),e.jsx("option",{value:"Food",children:"Food"}),e.jsx("option",{value:"Travel",children:"Travel"}),e.jsx("option",{value:"Fashion",children:"Fashion"}),e.jsx("option",{value:"Health",children:"Health"}),e.jsx("option",{value:"Sports",children:"Sports"}),e.jsx("option",{value:"Sci-Fi",children:"Sci-Fi"}),e.jsx("option",{value:"Finance",children:"Finance"}),e.jsx("option",{value:"Politics",children:"Politics"}),e.jsx("option",{value:"Narratives",children:"Narratives"}),e.jsx("option",{value:"Trending-Topics",children:"Trending-Topics"}),e.jsx("option",{value:"Others",children:"Others"})]}),e.jsxs("select",{value:c,onChange:t=>k(t.target.value),className:"px-4 py-3 rounded-xl bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("option",{value:"most-liked",children:"Most Liked"}),e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"oldest",children:"Oldest First"}),e.jsx("option",{value:"more than 500 words",children:"More than 500 words"}),e.jsx("option",{value:"less than 500 words",children:"Less than 500 words"}),e.jsx("option",{value:"more than 1000 words",children:"More than 1000 words"}),e.jsx("option",{value:"less than 1000 words",children:"Less than 1000 words"})]})]})]}),C&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 mb-8 flex justify-end",children:e.jsxs("button",{onClick:()=>window.location.href="/addarticle",className:`
                px-6 py-3 rounded-lg font-medium
                transform transition-all duration-300 hover:scale-105
                flex items-center gap-2 shadow-lg
                ${$==="light"?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-indigo-500 text-white hover:bg-indigo-600"}
              `,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Article"]})}),!b&&g.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(o.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(V,{children:g.map(t=>e.jsxs(o.div,{variants:D,initial:"hidden",animate:"visible",whileHover:"hover",className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-lg overflow-hidden",children:[t.thumbnail&&e.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-48 object-cover transition-transform duration-300 hover:scale-105"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-xs",children:t.tag||"Uncategorized"}),e.jsx(_,{articleId:t._id,initialLikes:t.likes||0})]}),e.jsx("h3",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:t.title}),e.jsx(G,{className:"text-gray-600 dark:text-gray-300 h-20 mb-8 line-clamp-3",children:t.content?`${t.content.substring(0,300)}${t.content.length>300?"...":""}`:"No description available."}),e.jsx(o.button,{variants:B,initial:"initial",animate:"animate",whileHover:"hover",whileTap:"tap",onClick:()=>window.location.href=`/article/${t.name}`,className:" relative w-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white py-3 rounded-xl hover:from-indigo-600 hover:to-purple-700 transition duration-300 bottom-4",children:"Read More"})]})]},t._id))})}),e.jsx(z,{}),e.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-4",children:["Showing ",g.length," of ",F," articles"]})]}),!b&&g.length===0&&e.jsxs(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-16",children:[e.jsx("img",{src:R,alt:"No articles",className:"mx-auto w-64 h-64 mb-6 opacity-70"}),e.jsx("h2",{className:"text-2xl font-bold text-indigo-600 mb-4",children:"No Articles Found"}),e.jsx("p",{className:"text-gray-500",children:"Check back later or start writing your first article!"})]})]})})};export{K as default};
